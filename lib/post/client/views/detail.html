<template name="postDetail">

  {{#contentFor "headerButtonLeft"}}
    {{>ionNavBackButton class="button-light" text=false}}
  {{/contentFor}}

  {{#contentFor "headerButtonRight"}}
    {{#if currentUser}}
      {{> favoriteButton _id=_id class='post-detail-favorite-button' category=category}}
    {{/if}}
    <button class="more-button button button-clear pull-right button-light ion-more icon" data-action="post-more"></button>
  {{/contentFor}}

  {{#contentFor "headerTitle"}}
    <h1 class="title">{{title}}</h1>
  {{/contentFor}}

  {{#contentFor "popup"}}
    {{>photoswipe}}
  {{/contentFor}}

  {{#ionView}}
    {{#ionContent}}

      {{#if detailContent}}

        {{>Template.dynamic template=detailContent}}

      {{else}}

        <div class="post-detail">

          {{#if hasPicture}}
            {{>pictureCarousel}}
          {{/if}}

          <div class="title-container">
            <label class="title">{{title}}</label>
            <label class="user">
              <a href="{{userUrl user}}">
                {{userName user}}
              </a>
            </label>
            <label class="date">{{dateString date}}</label>
          </div>

          {{#if content}}
            <div class="content-container ">
              {{content}}
            </div>
          {{/if}}

          <div class="more-detail">
            {{#if moreDetailTemplate}}
              {{>Template.dynamic template=moreDetailTemplate}}
            {{/if}}
          </div>

          {{#if this}}
            {{>commentsBox id=_id content=commentStrings customTemplate='commonCommentBox'}}
          {{/if}}

        </div>

      {{/if}}

    {{/ionContent}}

  {{/ionView}}
</template>
