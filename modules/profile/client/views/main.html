<template name="profileMain">

  {{#contentFor "headerTitle"}}
    <h1 class="title">{{title}}</h1>
  {{/contentFor}}

  {{#contentFor "headerButtonLeft"}}
    {{>ionNavBackButton class="button-light" text=false}}
  {{/contentFor}}

  {{#contentFor "headerButtonRight"}}
    {{#if isMe}}
      <button class="button button-clear pull-right button-light" data-action="logout">登出</button>
    {{else}}
      {{#if currentUser}}
        {{>favoriteButton _id=user category='user'}}
      {{/if}}
    {{/if}}
  {{/contentFor}}

  {{#ionView class='profile'}}

    {{#ionContent}}

      <div class="top">
        <div class="avatar" data-action="change-avatar">
          <img src={{avatarUrl user}}>
        </div>
        <div class="base-info">
          <a href={{nicknameEditorUrl}}>{{nickname}}</a>
          <a href={{locationEditorUrl}}>{{location}}</a>
        </div>
        <a href="/profile?type=qr&user={{user}}" class="qr-code"></a>
      </div>

      {{#ionList}}

        {{#each lines}}
          {{#ionItem href=href iconRight=true}}
            {{label}}：{{data}}
            {{>ionIcon icon=icon}}
          {{/ionItem}}
        {{/each}}

        {{#if isMe}}
          {{#ionItem href=myFavoriteUsersPath iconRight=true}}
            我的好友
            {{>ionIcon icon='ios-arrow-right'}}
          {{/ionItem}}
        {{/if}}

      {{/ionList}}

    {{/ionContent}}

    {{>tabBar}}

  {{/ionView}}

</template>